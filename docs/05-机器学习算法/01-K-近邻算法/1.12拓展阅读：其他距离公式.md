# 其他距离公式



## 1 标准化欧氏距离 

标准化欧氏距离(Standardized EuclideanDistance)是针对欧氏距离的缺点而作的一种改进。

思路：既然数据各维分量的分布不一样，那先将各个分量都“标准化”到均值、方差相等。



![image-20190213184012294](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knw09p3j318s07gt95.jpg)

> tips: S<sub>k</sub>表示各个维度的标准差

如果将方差的倒数看成一个权重，也可称之为加权欧氏距离(Weighted
Euclidean distance)。

举例:

```
X=[[1,1],[2,2],[3,3],[4,4]];（假设两个分量的标准差分别为0.5和1）
经计算得:
d =   2.2361    4.4721    6.7082    2.2361    4.4721    2.2361
```



## 2 余弦距离

几何中，夹角余弦可用来衡量两个向量方向的差异；机器学习中，借用这一概念来衡量样本向量之间的差异，就是余弦距离(Cosine Distance)。

- 二维空间中向量A(x1,y1)与向量B(x2,y2)的夹角余弦公式：

![余弦距离](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8kns9fl8j305w01q0sm.jpg)

- 两个n维样本点a(x11,x12,…,x1n)和b(x21,x22,…,x2n)的夹角余弦为：

![余弦距离](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knwxrqfj3034016q2q.jpg)

即：

![余弦距离](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knwjse2j306f01qq2u.jpg)

夹角余弦取值范围为[-1,1]。余弦越大表示两个向量的夹角越小，余弦越小表示两向量的夹角越大。当两个向量的方向重合时余弦取最大值1，当两个向量的方向完全相反余弦取最小值-1。

举例:

```
X=[[1,1],[1,2],[2,5],[1,-4]]
经计算得:
d =   0.9487    0.9191   -0.5145    0.9965   -0.7593   -0.8107
```



## 3 汉明距离【了解】

两个等长字符串s1与s2的汉明距离(Hamming Distance)为：将其中一个变为另外一个所需要作的最小字符替换次数。

例如:

```
  The Hamming distance between "1011101" and "1001001" is 2. 
  The Hamming distance between "2143896" and "2233796" is 3. 
  The Hamming distance between "toned" and "roses" is 3.
```



![image-20190213184508110](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knt9pd4j30kg0cggmm.jpg)

```
随堂练习：
求下列字符串的汉明距离：

  1011101与 1001001 　

  2143896与 2233796 
　
  irie与 rise

```

**汉明重量**：是字符串相对于同样长度的零字符串的汉明距离，也就是说，它是字符串中非零的元素个数：对于二进制字符串来说，就是
1 的个数，所以 11101 的汉明重量是 4。因此，如果向量空间中的元素a和b之间的汉明距离等于它们汉明重量的差a-b。

应用：汉明重量分析在包括信息论、编码理论、密码学等领域都有应用。比如在信息编码过程中，为了增强容错性，应使得编码间的最小汉明距离尽可能大。但是，如果要比较两个不同长度的字符串，不仅要进行替换，而且要进行插入与删除的运算，在这种场合下，通常使用更加复杂的编辑距离等算法。

举例:

```
X=[[0,1,1],[1,1,2],[1,5,2]]
注：以下计算方式中，把2个向量之间的汉明距离定义为2个向量不同的分量所占的百分比。

经计算得:
d =   0.6667    1.0000    0.3333
```

## 4 杰卡德距离【了解】

杰卡德相似系数(Jaccard similarity coefficient)：两个集合A和B的交集元素在A，B的并集中所占的比例，称为两个集合的杰卡德相似系数，用符号J(A,B)表示：

![image-20190213184805616](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8kntocusj30ai04ijrc.jpg)

杰卡德距离(Jaccard Distance)：与杰卡德相似系数相反，用两个集合中不同元素占所有元素的比例来衡量两个集合的区分度：

![image-20190213184819510](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knrruq0j30o204sq34.jpg)

举例:

```
X=[[1,1,0],[1,-1,0],[-1,1,0]]
注：以下计算中，把杰卡德距离定义为不同的维度的个数占“非全零维度”的比例
经计算得:
d =   0.5000    0.5000    1.0000
```



## 5 马氏距离【了解】

下图有两个正态分布图，它们的均值分别为a和b，但方差不一样，则图中的A点离哪个总体更近？或者说A有更大的概率属于谁？显然，A离左边的更近，A属于左边总体的概率更大，尽管A与a的欧式距离远一些。这就是马氏距离的直观解释。

![image-20190213183101699](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knv4s3kj30za0auzlc.jpg)

马氏距离(Mahalanobis Distance)是基于样本分布的一种距离。

马氏距离是由印度统计学家马哈拉诺比斯提出的，表示数据的协方差距离。它是一种有效的计算两个位置样本集的相似度的方法。

与欧式距离不同的是，它考虑到各种特性之间的联系，即独立于测量尺度。

**马氏距离定义：**设总体G为m维总体（考察m个指标），均值向量为μ=（μ<sub>1</sub>，μ<sub>2</sub>，… ...，μ<sub>m</sub>，）<sup>`</sup>,协方差阵为∑=（σ<sub>ij</sub>）,

则样本X=（X<sub>1</sub>，X<sub>2</sub>，… …，X<sub>m</sub>，）<sup>`</sup>与总体G的马氏距离定义为：

![image-20190316193646073](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knup0q6j30ze086q3j.jpg)

马氏距离也可以定义为两个服从同一分布并且其协方差矩阵为∑的随机变量的差异程度：如果协方差矩阵为单位矩阵，马氏距离就简化为欧式距离；如果协方差矩阵为对角矩阵，则其也可称为正规化的欧式距离。

**马氏距离特性：**

1.**量纲无关**，排除变量之间的相关性的干扰；

2.**马氏距离的计算是建立在总体样本的基础上的**，如果拿同样的两个样本，放入两个不同的总体中，最后计算得出的两个样本间的马氏距离通常是不相同的，除非这两个总体的协方差矩阵碰巧相同；

3 .计算马氏距离过程中，**要求总体样本数大于样本的维数**，否则得到的总体样本协方差矩阵逆矩阵不存在，这种情况下，用欧式距离计算即可。

4.还有一种情况，满足了条件总体样本数大于样本的维数，但是协方差矩阵的逆矩阵仍然不存在，比如三个样本点（3，4），（5，6），（7，8），这种情况是因为这三个样本在其所处的二维空间平面内共线。这种情况下，也采用欧式距离计算。

**欧式距离&马氏距离：**

![](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knsvlwdj30xe0a8t9q.jpg)

举例：

已知有两个类G<sub>1</sub>和G<sub>2</sub>，比如G<sub>1</sub>是设备A生产的产品，G<sub>2</sub>是设备B生产的同类产品。设备A的产品质量高（如考察指标为耐磨度X），其平均耐磨度μ<sub>1</sub>=80，反映设备精度的方差σ<sup>2</sup>(1)=0.25;设备B的产品质量稍差，其平均耐磨损度μ<sub>2</sub>=75，反映设备精度的方差σ<sup>2</sup>(2)=4.

今有一产品G<sub>0</sub>，测的耐磨损度X<sub>0</sub>=78，试判断该产品是哪一台设备生产的？

直观地看，X<sub>0</sub>与μ<sub>1</sub>（设备A）的绝对距离近些，按距离最近的原则，是否应把该产品判断设备A生产的？

考虑一种相对于分散性的距离，记X<sub>0</sub>与G<sub>1</sub>，G<sub>2</sub>的相对距离为d<sub>1</sub>，d<sub>2</sub>,则：

 ![image-20190316192358557](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knu9eeoj30v40ak0to.jpg)

因为d<sub>2</sub>=1.5 < d<sub>1</sub>=4，按这种距离准则，应判断X<sub>0</sub>为设备B生产的。

设备B生产的产品质量较分散，出现X<sub>0</sub>为78的可能性较大；而设备A生产的产品质量较集中，出现X<sub>0</sub>为78的可能性较小。

这种相对于分散性的距离判断就是马氏距离。

![image-20190316192851778](https://tva1.sinaimg.cn/large/007S8ZIlly1gf8knvjuckj30w40d8q3q.jpg)

## 